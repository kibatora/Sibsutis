% --- Параметры СМО ---
lambda = 20;  % Интенсивность потока заявок
mu = 20;      % Интенсивность обслуживания
n = 4;        % Число каналов обслуживания
m = 10;       % Максимальный размер очереди

% --- Расчет показателей ---

% 1. Ро (коэффициент загрузки) - используется для промежуточных расчетов
ro = lambda / mu; 

% 2. Вероятность простоя системы (P0)
P0 = 1 / (sum((ro.^(0:n))./(factorial(0:n))) + ((ro^n / factorial(n)) * ((1 - (ro/n)^(m+1)) / (1 - ro/n)))); 

% 3. Вероятность отказа (Pотк)
Potk = (ro^(n+m))/(factorial(n)*(n^m))*P0;

% 4. Относительная пропускная способность (Q)
Q = 1 - Potk;

% 5. Абсолютная пропускная способность системы (A)
A = lambda * Q;

% 6. Среднее количество занятых каналов (kзан)
kzan = A / mu;

% 7. Средняя длина очереди (Lоч)
Loch = (P0*(ro^(n+1))/(factorial(n)*n*(1-(ro/n))^2))*(1-((ro/n)^m)*(m+1-(m*ro)/n))*P0;

% 8. Среднее время ожидания заявки в очереди (Tоч)
Toch = Loch / lambda;

% 9. Среднее количество заявок в системе (Lсист)
Lsist = Loch + kzan;

% 10. Среднее время пребывания заявки в системе (Tсист)
Tsist = Lsist / lambda;

% --- Вывод результатов в таблицу ---
T = table;
T.Pokazatel = {'lambda'; 'mu'; 'n'; 'm'; 'Ro'; 'P0'; 'Potk'; 'Q'; 'A'; 'kzan'; 'Loch'; 'Toch'; 'Lsist'; 'Tsist'};
T.Value = [lambda; mu; n; m; ro; P0; Potk; Q; A; kzan; Loch; Toch; Lsist; Tsist];
disp(T)

% --- Интерпретация результатов ---
if ro < n
    disp('Система работоспособна (ro < n)')
else
    disp('Система перегружена (ro >= n)')
end